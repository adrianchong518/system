exec-once = waybar
exec-once = dunst
exec-once = hypridle

$mod = SUPER

general {
    col.active_border = 0xffbbbbbb
    col.inactive_border = 0xff444444
    gaps_in = 5
    gaps_out = 5

    layout = master
}

gestures {
    workspace_swipe = true
    workspace_swipe_cancel_ratio = 0.150000
    workspace_swipe_distance = 400
}

input {
    touchpad {
        natural_scroll = true
        scroll_factor = 0.250000
        tap-and-drag = true
    }
    kb_layout = us
    kb_options = ctrl:nocaps
    kb_variant = colemak
}

decoration {
    blur {
        enabled = true
        popups = true
        size = 4
        vibrancy = 0.5
        vibrancy_darkness = 0.10
    }
    drop_shadow = false

    active_opacity = 0.85
    inactive_opacity = 0.85
    fullscreen_opacity = 1.0
}

misc {
    vrr = 2
    focus_on_activate = true

    disable_hyprland_logo = true
    disable_splash_rendering = true
    background_color = 0x000000

    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
}

master {
    allow_small_split = true
    always_center_master = true
    new_is_master = false
    orientation = left
    mfact = 0.5
}

animation = workspaces,1,5,default
animation = windows,1,8,default,slide
animation = fade,1,3,default

monitor = ,preferred,auto,1

## Persistent workspaces
# Terminal
workspace = name:Term, persistent:true
exec-once = [workspace name:Term silent;noanim;noinitialfocus] wezterm
bind = $mod CTRL,       t, workspace,       name:Term
bind = $mod CTRL,       t, focuswindow,     wezterm
bind = $mod CTRL SHIFT, t, movetoworkspace, name:Term
bind = $mod ALT,        t, exec,            wezterm

windowrulev2 = workspace name:Term, class:(org.wezfurlong.wezterm)
windowrulev2 = opacity 1.0 override, class:(org.wezfurlong.wezterm)

# Browser
workspace = name:Browser, persistent:true
exec-once = [workspace name:Browser silent;noanim;noinitialfocus] firefox
bind = $mod CTRL,       b, workspace,       name:Browser
bind = $mod CTRL,       b, focuswindow,     firefox
bind = $mod CTRL SHIFT, b, movetoworkspace, name:Browser

windowrulev2 = workspace name:Browser, class:(firefox)
windowrulev2 = float,  title:^(Picture-in-Picture)$
windowrulev2 = pin,    title:^(Picture-in-Picture)$
windowrulev2 = opaque, title:^(Picture-in-Picture)$

# Comms
workspace = name:Comms, persistent:true
bind = $mod CTRL,       c, workspace,       name:Comms
bind = $mod CTRL SHIFT, c, movetoworkspace, name:Comms

windowrulev2 = workspace name:Comms, class:(whatsapp-for-linux)
windowrulev2 = workspace name:Comms, class:(teams-for-linux)
windowrulev2 = workspace name:Comms, class:(thunderbird)

## Key binds
# Default numbered workspaces
bind = $mod,       1, workspace,       1
bind = $mod,       2, workspace,       2
bind = $mod,       3, workspace,       3
bind = $mod,       4, workspace,       4
bind = $mod,       5, workspace,       5
bind = $mod,       6, workspace,       6
bind = $mod,       7, workspace,       7
bind = $mod,       8, workspace,       8
bind = $mod,       9, workspace,       9
bind = $mod,       0, workspace,       10
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Move (window) to workspace
bind = $mod,       left,  workspace,       m-1
bind = $mod,       h,     workspace,       m-1
bind = $mod SHIFT, left,  movetoworkspace, r-1
bind = $mod SHIFT, h,     movetoworkspace, r-1
bind = $mod,       right, workspace,       m+1
bind = $mod,       l,     workspace,       m+1
bind = $mod SHIFT, right, movetoworkspace, r+1
bind = $mod SHIFT, l,     movetoworkspace, r+1

# Move (workspace) to monitor
bind = $mod,       up,   focusmonitor,                  +1
bind = $mod,       k,    focusmonitor,                  +1
bind = $mod ALT,   up,   movecurrentworkspacetomonitor, +1
bind = $mod ALT,   k,    movecurrentworkspacetomonitor, +1
bind = $mod,       down, focusmonitor,                  -1
bind = $mod,       j,    focusmonitor,                  -1
bind = $mod ALT,   down, movecurrentworkspacetomonitor, -1
bind = $mod ALT,   j,    movecurrentworkspacetomonitor, -1

# Move and resize window
bindm = $mod,       mouse:272, movewindow
bindm = $mod ALT,   mouse:272, resizewindow
bindm = $mod SHIFT, mouse:272, resizewindow 1

# Master layout
bind = $mod,       return,       layoutmsg, focusmaster auto
bind = $mod SHIFT, return,       layoutmsg, swapwithmaster auto
bind = $mod,       equal,        layoutmsg, addmaster
bind = $mod,       minus,        layoutmsg, removemaster
bind = $mod,       bracketright, layoutmsg, cyclenext
bind = $mod,       bracketleft,  layoutmsg, cycleprev
bind = $mod SHIFT, bracketright, layoutmsg, rollnext
bind = $mod SHIFT, bracketleft,  layoutmsg, rollprev
bind = $mod,       backslash,    layoutmsg, orientationcycle left center

bind=$mod ALT, r, exec, dunstify -u critical -a hyprland 'MODE: resize' -p > $XDG_RUNTIME_DIR/.hyprland-submap.notif
bind=$mod ALT, r, submap, resize
submap=resize
binde = , left,  resizeactive,-10 0
binde = , h,     resizeactive,-10 0
binde = , up,    resizeactive,0 -10
binde = , k,     resizeactive,0 -10
binde = , down,  resizeactive,0 10
binde = , j,     resizeactive,0 10
binde = , right, resizeactive,10 0
binde = , l,     resizeactive,10 0

binde = , bracketright, layoutmsg, mfact +0.1
binde = , bracketleft,  layoutmsg, mfact -0.1
binde = , equal,        layoutmsg, mfact  0.5

bind  = , escape, exec, dunstify -C `cat $XDG_RUNTIME_DIR/.hyprland-submap.notif`
bind  = , escape, submap, reset
bind  = CTRL, bracketleft, exec, dunstify -C `cat $XDG_RUNTIME_DIR/.hyprland-submap.notif`
bind  = CTRL, bracketleft, submap, reset
submap=reset

# Screenshot
bind = $mod,       p, exec, hyprshot -m window --clipboard-only # Screenshot a window
bind = $mod SHIFT, p, exec, hyprshot -m output --clipboard-only # Screenshot a monitor
bind = $mod ALT,   p, exec, hyprshot -m region --clipboard-only # Screenshot a region

bind = $mod, f, fullscreen, 1 # Toggle fullscreen
bind = $mod SHIFT, f, fullscreen, 0 # Toggle really fullscreen
bind = $mod, t, togglefloating # Toggle float
bind = $mod, b, toggleopaque # Toggle opaque
bind = $mod, q, killactive # Close active window
bind = $mod CTRL, q, exec, wlogout # Logout widget

# Run rofi
bind = $mod,       r,     exec, pkill rofi || rofi -show run
bind = $mod,       c,     exec, pkill rofi || rofi -show calc -no-show-match -no-sort
bind = $mod,       space, exec, pkill rofi || rofi -show drun
bind = $mod SHIFT, space, exec, pkill rofi || rofi -show window
bind = $mod,       v,     exec, pkill rofi || cliphist list | rofi -dmenu | cliphist decode | wl-copy
windowrulev2 = center 1, class:(Rofi)
windowrulev2 = stayfocused, class:(Rofi)

# Waybar toggle
bind = $mod, w, exec, pkill --signal SIGUSR1 waybar

windowrulev2 = opaque, class:(virt-manager)
